
#profile
  #header
    .container
      .row.this-infos
        .col-md-2
          = image_tag @user.avatar.url(:pro), class: "img-circle center"
        .col-md-10
          - if user_signed_in?
            - if current_user != @user
              - if !current_user.following?(@user)
                = form_for(current_user.active_relationships.build) do |f|
                  = hidden_field_tag :followed_id, @user.id
                  = f.submit "Follow", class: "btn pull-right btn-follow"
              - else
                = form_for(current_user.active_relationships.find_by(followed_id: @user.id), html: { method: :delete }) do |f|
                  = f.submit "Unfollow", class: "btn pull-right btn-follow"
            - else
              = link_to "Edit Profile", edit_user_registration_path, class: 'btn pull-right btn-follow'

          %h2.name
            = @user.name
            %span.badge
              %i.fa.fa-check-circle
              = 'Creator'
          %p.email.mb-0= @user.email
          %p.has.mb-2
            = pluralize(@user.followers.count, "Follower")
            = '•'
            = pluralize(@user.notes.count, "Note")
          %p.this-text.mb-0= @user.about

#notes
  .container.mt-5.mb-4
    %h3.title= 'Latest Notes'
    .row.flex-grid
      - @user_notes.each do |note|
        .col-md-4.col-lg-3
          .note
            = link_to (image_tag note.image.url(:small)), note, class: 'img-note'
            .note_content
              %p.info.mb-2
                = note.user.name
                = '•'
                = 'Science'
              %h2.title= link_to note.title, note
              %p.body
                = truncate(note.body, :length => 150)
              %p.buttons
                %span
                  %i.fa.fa-comments-o
                  = pluralize(note.comments.count, "Comment")
                %span
                  %i.fa.fa-thumbs-o-up
                  = pluralize(note.get_upvotes.size, "Like")
                %span
                  %i.fa.fa-eye
                  = pluralize(note.view, "View")
